# PRD: 학습용 비교 글쓰기 웹앱 템플릿

## 1. 목적 및 배경
- 목적: 학생이 특정 주제에 대해 비교·분석 글을 작성하고, AI 피드백을 받아 수정·완성하도록 돕는 경량 웹앱.
- 배경: 학교 수행평가/수업 활동에 빠르게 재사용 가능한 템플릿을 구축하여, 다양한 주제(키오스크, 환경, 안전, 진로 등)에 즉시 확장.

## 2. 사용자 및 이해관계자
- 학생(초·중등): 글 작성, AI 피드백 수용, 수정 및 제출.
- 교사: 과제 기준(최소 글자 수, 제출 포맷) 설정, 결과물 수집/평가.
- 관리자(선택): 과제별 배포/환경변수 관리, 접근성/정책 준수 검토.

## 3. 범위(Scope)
- 포함:
  - 단계형 UI: ① 정보 입력 → ② AI 조언 → ③ 최종 확인/내보내기
  - 최소 글자 수 선택(200/300/400/500/600자)과 카운터/검증 동기화
  - 입력칸 전용 붙여넣기/우클릭/드롭 차단(학습 보조)
  - PDF 저장(jsPDF, 한글 폰트 임베드) 및 브라우저 인쇄 내보내기
  - 서버리스 리뷰 API(`/api/review`)를 통한 AI 피드백 수신
- 제외(초기):
  - 계정/로그인, DB 저장, 실시간 공동 편집
  - 완전한 부정행위 방지(클라이언트 측 보조로 한정)

## 4. 핵심 요구사항(Functional Requirements)
1) 정보 입력
   - 필수 필드: 학교, 번호, 이름
   - 최소 글자 수 선택: 200/300/400/500/600자(기본 600)
   - 본문 입력: 실시간 글자 수 카운터, 선택값 기준 색상 피드백
2) AI 조언 단계
   - `/api/review`로 본문 전달, 피드백 표시(로딩/오류 처리 포함)
   - AI 피드백 정상 수신 시에만 다음 단계 활성화
3) 최종 단계
   - 초안/피드백/수정본 미리보기
   - PDF 저장(jsPDF + 임베디드 한글 폰트) 및 인쇄 기능 제공
4) 보조 정책
   - 입력칸에 한정하여 우클릭/붙여넣기/드롭 차단
   - 접근성 영향 최소화를 위해 전역 차단 미적용, 안내 메시지 제공

## 5. 비기능 요구사항(Non-Functional)
- 성능: 저사양 기기에서도 즉시 반응(로컬 정적 호스팅 가능)
- 접근성: 전역 차단 지양, 입력칸 차단 시 안내 제공, 폰트 가독성 확보
- 호환성: 최신 크롬/엣지/사파리, iOS/Android 모바일 브라우저 고려
- 보안/프라이버시: API 키 환경변수 관리, 학생 개인정보는 클라이언트 보관(서버 저장 없음)

## 6. 성공 지표(Success Metrics)
- 완성 제출률(초안→피드백→수정 완료 비율)
- 평균 작성 시간, 평균 글자 수
- 피드백 수신 성공률(HTTP 200 비율)

## 7. 사용자 흐름(User Flow)
1) 과제 페이지 열기 → 2) 기본 정보 입력 → 3) 최소 글자 수 선택 → 4) 본문 작성 → 5) AI 검토 요청 → 6) 피드백 반영하여 수정 → 7) 최종 확인 → 8) PDF 저장 또는 인쇄

## 8. UI/UX 요구사항
- 단계 스텝퍼 제공, 현재 단계 시각화
- 본문 영역: 고정 높이, 스크롤 가능, 가시적 카운터
- 피드백 영역: 로딩 스피너, 오류 메시지, 성공 시 내용 표시
- 버튼 상태: 비활성/로딩 상태 명확히 표현

## 9. 기술 스택 및 아키텍처
- 프런트: HTML, Tailwind CSS, 바닐라 JS
- PDF: jsPDF(+AutoTable 옵션), 임베디드 한글 폰트(`NotoSansKR-Regular.ttf`)
- 서버리스: `/api/review`(예: Vercel) - `GEMINI_API_KEY` 사용
- 정적 호스팅 가능, 서버리스 엔드포인트와 분리 배포 가능

## 10. 구성/환경 변수
- `GEMINI_API_KEY`: AI 리뷰용 키(서버리스 환경변수)
- (선택) 과제 기본값: 최소 글자 수 기본값(예: `MIN_CHARS_DEFAULT=600`)

## 11. 정책/준수사항
- 개인정보 최소 수집(서버 저장 없음)
- 저작권/표절 안내: 외부 텍스트 무단 복제 금지 고지
- 접근성: 입력칸 차단 정책 안내(보조기기 영향 가능성 표기)

## 12. 로깅/모니터링(선택)
- API 응답 시간/오류율 수집(서버리스 로그)
- 클라이언트 단순 이벤트(제출 시점) 익명 수집 가능

## 13. 릴리즈 체크리스트
- [ ] 최소 글자 수 선택 동작, 카운터/검증 연동 확인
- [ ] AI 피드백 정상 수신 및 2단계 완료 버튼 게이트 확인
- [ ] PDF 저장 및 인쇄 내보내기 정상
- [ ] 입력칸 차단(붙여넣기/우클릭/드롭) 동작 및 안내 확인
- [ ] 폰트 로드 실패 시 대체 경로(인쇄 안내) 노출

## 14. 향후 확장 아이디어
- 교사용 설정 패널(최소 글자 수 기본값, 테마, 금지/허용 정책 토글)
- 난이도별 프롬프트/피드백 템플릿
- 클라우드 저장/제출, 평가 루브릭 연동
- 난독화/간단 부정행위 탐지(입력 타이밍 기반 경고)


